---
import Base from "@/layouts/Base.astro";
import { markdownify } from "@/lib/utils/textConverter";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";
import Button from "@/shortcodes/Button";
import Accordion from "@/shortcodes/Accordion";

const pageData = {
  title: "Kowalah Reserved",
  meta_title: "Kowalah Reserved | Your AI Co-CEO",
  description: "A strategic mirror that knows your context. Kowalah Reserved is a desktop application for CEOs who need an always-available thought partner with complete privacy. By invitation only.",

  hero: {
    title: "Your AI Co-CEO. With a crew.",
    subtitle: "A strategic mirror that knows your context. Available 24/7. Maintained by expert coaches who understand how you think.",
    badge: "By Invitation",
    cta: {
      label: "Apply for Kowalah Reserved",
      link: "#apply"
    },
    image: "/images/reserved/hero-desktop-app.png"
  },

  problem: {
    opening: "It's not that you don't have people to talk to.",
    emphasis: "It's that you can't always talk to them.",
    constraints: [
      {
        direction: "Your team below",
        issue: "Leadership means projecting confidence, even when you're uncertain. Your senior team needs to see resolve, not your deepest doubts.",
        icon: "profile"
      },
      {
        direction: "Your board above",
        issue: "Strategic concerns need framing before they're shared upward. You can't think out loud with the people who are evaluating your judgment.",
        icon: "case"
      },
      {
        direction: "Your coach sideways",
        issue: "They need 30 minutes of context every time. They don't live in your world. By the time they understand, the moment has passed.",
        icon: "bulb"
      },
      {
        direction: "Your family and friends",
        issue: "They love you, but they don't have the business context to help you think it through. You don't want to burden them anyway.",
        icon: "help"
      }
    ],
    timing: "And strategic concerns don't wait for office hours. They hit at 2am when you're staring at the ceiling.",
    insight: "Everyone around you comes with constraints. You need someone who doesn't."
  },

  conversation: {
    title: "A thought partner you can actually talk to",
    subtitle: "Work through strategic challenges in real-time, whenever they arise.",
    description: "Kowalah Reserved is a desktop application where you can discuss what's happening in your organization, think through decisions, and explore strategic options. It's available at 2am when you're staring at the ceiling, on a flight before a board meeting, or in the quiet moments when the real thinking happens.",
    benefits: [
      "Think out loud about concerns you might not share with anyone else",
      "Explore 'what if we're wrong about X?' without managing reactions",
      "No scheduling, no waiting, no 30-minute context re-establishment"
    ],
    image: "/images/reserved/reserved-chat.png",
    imageAlt: "Kowalah Reserved chat interface showing a strategic conversation about Playing to Win strategy"
  },

  solution: {
    title: "A strategic mirror that actually knows your context",
    subtitle: "Not just the facts about your business. How you think about it.",
    description: "What makes Kowalah Reserved different from a generic AI chatbot? It's configured to mirror your context through four pillars that our team builds and maintains for you.",
    pillars: [
      {
        title: "Memory",
        subtitle: "Your organizational context, embedded",
        description: "Memory captures the context of your workspace—your organizational structure, key relationships, strategic priorities, and how you think about the business. It's not just what you've told it; it's the accumulated understanding of how you operate.",
        image: "/images/reserved/reserved-memory.png",
        imageAlt: "Kowalah Reserved memory configuration showing workspace structure and AI Co-CEO identity"
      },
      {
        title: "Skills",
        subtitle: "Autonomous capabilities tailored to how you work",
        description: "Skills are workflows the AI can invoke based on context. From structured strategic updates using the CEO Strategy Toolkit, to extracting insights from podcasts and articles, to creating investor updates—each skill is configured for your specific needs.",
        image: "/images/reserved/reserved-skills.png",
        imageAlt: "Kowalah Reserved skills panel showing CEO strategy toolkit, content capturer, and investor update skills"
      },
      {
        title: "Connectors",
        subtitle: "Your business systems, connected",
        description: "Connectors give your AI Co-CEO access to your business data. HubSpot for CRM and pipeline context. Xero for financial reality. Linear for project tracking. Even Zapier for connecting to 7,000+ additional apps. Real-time access to the information that matters.",
        image: "/images/reserved/reserved-connectors.png",
        imageAlt: "Kowalah Reserved connectors panel showing HubSpot, Xero, Linear, and Zapier integrations"
      },
      {
        title: "Agents",
        subtitle: "Specialized assistants for focused tasks",
        description: "Agents are specialized subagents that handle focused tasks with isolated context. A competitive intelligence agent that researches market trends before board meetings. A freshness scanner that audits stale documents. An inconsistency checker that flags strategic contradictions.",
        image: "/images/reserved/reserved-agent.png",
        imageAlt: "Kowalah Reserved agents panel showing competitive intel, freshness scanner, and inconsistency checker agents"
      }
    ],
    note: "This is not a SaaS product. It's a concierge strategic enablement service delivered through a desktop application, backed by expert coaches who customize and maintain it for you."
  },

  comparison: {
    title: "Why not just use Claude or ChatGPT?",
    subtitle: "The fundamental difference: Kowalah can take action. ChatGPT cannot.",
    description: "Kowalah Reserved uses Anthropic's Agent SDK—the same technology powering Claude Code. It can navigate your strategic workspace, read your documents, create new files, update existing plans, and organize your thinking. It's not just answering questions; it's working alongside you.",
    items: [
      { capability: "File system access", kowalah: "Reads, creates, and updates your documents", generic: "Copy-paste only" },
      { capability: "Persistent workspace", kowalah: "Navigates your strategic files like a colleague", generic: "No file access" },
      { capability: "Pre-built skills", kowalah: "20+ executive-focused workflows", generic: "Start from scratch" },
      { capability: "Strategic frameworks", kowalah: "Playing to Win, OKRs, Traction embedded", generic: "You teach it each time" },
      { capability: "Business tool connections", kowalah: "HubSpot, Xero, email, calendar, documents", generic: "Copy-paste everything" },
      { capability: "Context retention", kowalah: "Knows your business permanently", generic: "Forgets every session" },
      { capability: "Personalization", kowalah: "Three-month mirroring engagement", generic: "Generic out of the box" },
      { capability: "Ongoing support", kowalah: "Dedicated strategist maintaining your setup", generic: "You're on your own" },
      { capability: "Privacy", kowalah: "Everything stays on your machine", generic: "Data goes to the cloud" }
    ]
  },

  capabilities: {
    title: "What you can do with your AI Co-CEO",
    items: [
      {
        title: "Strategic Planning & Coaching",
        icon: "graph",
        description: "Apply world-class strategic frameworks with an AI that guides you through the process.",
        examples: ["Playing to Win cascade strategy", "OKR planning and tracking", "Product ideation evaluation", "Go-to-market strategy with Traction Bullseye"]
      },
      {
        title: "Content & Communications",
        icon: "task",
        description: "Produce executive-quality content quickly, in your voice.",
        examples: ["Board-ready investor updates", "Thought leadership articles", "LinkedIn and social presence", "Internal communications with Smart Brevity"]
      },
      {
        title: "Business Operations",
        icon: "cpu",
        description: "Connect to your business systems and take action.",
        examples: ["CRM integration (HubSpot)", "Financial data (Xero)", "Document management (Word, Excel, PowerPoint)", "Email and calendar review"]
      },
      {
        title: "Strategic Review & Planning",
        icon: "time",
        description: "Maintain strategic clarity with structured review processes.",
        examples: ["Weekly pulse checks", "Monthly strategic assessments", "Braindump sessions", "Living strategy document updates"]
      }
    ]
  },

  compounding: {
    title: "The more you use it, the more valuable it becomes",
    description: "Most tools deliver the same value on day one as day one hundred. Kowalah Reserved is different.",
    items: [
      {
        title: "Your strategic history",
        description: "Past decisions, their rationale, and their outcomes inform today's advice."
      },
      {
        title: "Your mental models",
        description: "How you frame problems, the frameworks you reach for, your thinking patterns."
      },
      {
        title: "Your communication patterns",
        description: "The way you prefer to receive and share information, your style."
      },
      {
        title: "Your organizational context",
        description: "Key relationships, team dynamics, recurring challenges, political realities."
      },
      {
        title: "Your domain expertise",
        description: "Industry knowledge, competitive insights, market understanding accumulated over time."
      }
    ],
    outcome: "After six months, you're not explaining context anymore. After a year, it's like talking to someone who's been in the room for every strategic conversation you've had."
  },

  mirroring: {
    title: "The Mirroring Process",
    subtitle: "Building your strategic mirror isn't a technical setup—it's a process of deeply understanding how you think, lead, and operate.",
    months: [
      {
        title: "Month 1",
        heading: "Understanding Your Mental Model",
        description: "We learn how you think through a series of conversations.",
        items: [
          "Decision-making patterns and frameworks you naturally reach for",
          "Organizational structure, key relationships, tensions and dynamics",
          "Information sources: books, podcasts, mentors who've shaped your thinking",
          "Communication style and how you prefer to receive information"
        ]
      },
      {
        title: "Month 2",
        heading: "Building Your Capabilities",
        description: "Based on what we learn, we build out the mirror.",
        items: [
          "Custom skills tailored to how you work, not generic templates",
          "Your frameworks embedded in the system",
          "Specialist agents trained for specific domains of your business",
          "Quick commands for your most common strategic tasks"
        ]
      },
      {
        title: "Month 3",
        heading: "Connecting Your World",
        description: "We integrate with the systems that run your business.",
        items: [
          "CRM (HubSpot, Salesforce) for customer and pipeline context",
          "Accounting (Xero, QuickBooks) for financial reality",
          "Documents (Drive, SharePoint) for existing strategic materials",
          "Communications (Email, Slack, Calendar) for information flow"
        ]
      }
    ],
    ongoing: {
      title: "Ongoing: Your Crew",
      description: "After the initial mirroring, you're not on your own.",
      items: [
        "Dedicated strategist maintains and evolves your setup",
        "Regular check-ins to capture new frameworks, processes, and context",
        "Continuous refinement as your business and thinking evolve",
        "Direct support whenever you need it"
      ]
    }
  },

  skills: {
    title: "20+ Pre-Built Executive Skills",
    subtitle: "Each skill embeds proven frameworks and methodologies.",
    categories: [
      {
        title: "Strategy",
        items: ["CEO Strategy Toolkit (Playing to Win)", "OKR Planner", "Product Ideation Framework"]
      },
      {
        title: "Marketing",
        items: ["Traction Bullseye", "Obviously Awesome Positioning", "Content Writer", "Webinar Development"]
      },
      {
        title: "Operations",
        items: ["Investor Updates", "Role Definition", "Legal Contract Review", "Smart Brevity Communications"]
      },
      {
        title: "Coaching",
        items: ["Mentor (Socratic coaching)", "Content Capturer (extract insights from articles/podcasts)"]
      }
    ]
  },

  privacy: {
    title: "Complete Privacy & Control",
    subtitle: "Your most sensitive strategic thinking deserves absolute confidentiality.",
    items: [
      {
        title: "Local-first architecture",
        description: "All workspace files stay on your machine. No file uploads to Kowalah servers. Your documents never leave your computer.",
        icon: "monitor"
      },
      {
        title: "Your own API key",
        description: "Direct relationship with Anthropic. Messages encrypted in transit. Anthropic doesn't train on your data.",
        icon: "check"
      },
      {
        title: "Secure connectors",
        description: "OAuth-based authentication for business tools. Credentials stored in your system keychain. You control which tools are connected.",
        icon: "check"
      },
      {
        title: "Works offline",
        description: "Document-based tasks work without internet. Your strategic workspace is always accessible.",
        icon: "cloud"
      }
    ]
  },

  application: {
    title: "Apply for Kowalah Reserved",
    subtitle: "Kowalah Reserved is available by invitation to qualifying executives. Tell us about yourself and we'll be in touch.",
    privacy_note: "Your information is confidential and will only be used to assess fit.",
    hubspot: {
      portal_id: "139642758",
      form_guid: "f4bfbc62-d952-403b-b3e5-4c7ce1453444"
    }
  },

  faq: {
    title: "Questions",
    items: [
      {
        question: "How is this different from ChatGPT or Claude.ai?",
        answer: "Those are blank canvases. Kowalah Reserved is a mirror of your business and your thinking. It knows your context permanently, uses your frameworks, connects to your tools, and gets maintained by expert coaches. You're not teaching an AI from scratch every conversation—you're picking up where you left off with a strategic partner that already understands."
      },
      {
        question: "Is my data safe?",
        answer: "Yes. All workspace files remain on your local machine. The application communicates with Claude's API for AI responses, but your documents never leave your computer. Business tool connectors use secure OAuth authentication with credentials stored in your system keychain."
      },
      {
        question: "Do I need to be technical?",
        answer: "No. The mirroring process is a series of conversations, not technical configuration. The interface is natural language. If you can send an email, you can use Kowalah Reserved."
      },
      {
        question: "What's the time commitment?",
        answer: "The three-month mirroring process requires roughly 4-6 hours of your time per month—conversations about how you think and work. The Kowalah team handles everything else: building skills, configuring agents, connecting systems."
      },
      {
        question: "When does it start being useful?",
        answer: "Immediately. You can start having strategic conversations from day one. The value compounds over time as the mirror becomes more accurate—by month three, it's like talking to someone who's worked alongside you for years."
      }
    ]
  }
};
---

<Base title={pageData.title} meta_title={pageData.meta_title} description={pageData.description}>

  <!-- Hero Section -->
  <section class="section-sm pt-24 pb-16 lg:pb-24 xl:pb-32 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 -z-10"></div>
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-primary/20 via-transparent to-transparent -z-10"></div>

    <div class="container">
      <div class="row items-center">
        <!-- Left column: Text content -->
        <div class="lg:col-6 mb-12 lg:mb-0">
          <div class="inline-block mb-6" data-aos="fade-up-sm">
            <span class="px-4 py-2 rounded-full text-sm font-medium bg-primary/20 text-primary border border-primary/30">
              {pageData.hero.badge}
            </span>
          </div>

          <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.hero.title}
          </h1>

          <p class="text-xl text-white/80 mb-10" data-aos="fade-up-sm" data-aos-delay="100">
            {pageData.hero.subtitle}
          </p>

          <div data-aos="fade-up-sm" data-aos-delay="150">
            <a
              href={pageData.hero.cta.link}
              class="inline-flex items-center gap-2 px-8 py-4 rounded-lg bg-gradient-to-r from-primary to-secondary text-white font-semibold hover:shadow-lg hover:shadow-primary/25 transition-all"
            >
              {pageData.hero.cta.label}
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </a>
          </div>
        </div>

        <!-- Right column: Product screenshot -->
        <div class="lg:col-6" data-aos="fade-left" data-aos-delay="200">
          <div class="relative lg:-mr-24 xl:-mr-32">
            <!-- Glow effect behind image -->
            <div class="absolute -inset-4 bg-gradient-to-r from-primary/30 to-secondary/30 rounded-3xl blur-2xl opacity-50"></div>
            <!-- Product screenshot -->
            <img
              src="/images/reserved/reserved-hero.png"
              alt="Kowalah Reserved desktop application showing strategic document editing with AI assistant"
              class="relative rounded-2xl shadow-2xl border border-white/10 w-full lg:scale-110 xl:scale-125 origin-left"
              width="800"
              height="600"
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- The Constraint Problem Section -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-10 text-center">
          <p class="text-2xl md:text-3xl text-slate-600 mb-2" data-aos="fade-up-sm">
            {pageData.problem.opening}
          </p>
          <h2 class="text-3xl md:text-4xl lg:text-5xl font-bold text-slate-900" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.problem.emphasis}
          </h2>
        </div>
      </div>

      <div class="row g-6 gap-y-8 mb-12">
        {pageData.problem.constraints.map((constraint, index) => (
          <div class="md:col-6" data-aos="fade-up-sm" data-aos-delay={index * 50}>
            <div class="p-6 rounded-2xl bg-slate-50 border border-slate-100 h-full">
              <div class="flex items-start gap-4">
                <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-slate-200 flex items-center justify-center">
                  <Icon name={constraint.icon} class="w-6 h-6 text-slate-600" />
                </div>
                <div>
                  <h3 class="text-lg font-semibold text-slate-900 mb-2">{constraint.direction}</h3>
                  <p class="text-slate-600">{constraint.issue}</p>
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>

      <div class="row justify-center">
        <div class="lg:col-10 text-center">
          <p class="text-xl text-slate-500 italic mb-6" data-aos="fade-up-sm">
            {pageData.problem.timing}
          </p>
          <p class="text-2xl font-semibold text-slate-900" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.problem.insight}
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Conversation Section -->
  <section class="section bg-slate-50">
    <div class="container">
      <div class="row items-center g-8 lg:g-12">
        <div class="lg:col-6" data-aos="fade-right">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">
            {pageData.conversation.title}
          </h2>
          <p class="text-xl text-primary font-medium mb-6">
            {pageData.conversation.subtitle}
          </p>
          <p class="text-lg text-slate-600 mb-8">
            {pageData.conversation.description}
          </p>
          <ul class="space-y-3">
            {pageData.conversation.benefits.map((benefit) => (
              <li class="flex items-start gap-3">
                <div class="flex-shrink-0 w-6 h-6 rounded-full bg-gradient-to-br from-primary to-secondary flex items-center justify-center mt-0.5">
                  <svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                  </svg>
                </div>
                <span class="text-slate-700">{benefit}</span>
              </li>
            ))}
          </ul>
        </div>
        <div class="lg:col-6" data-aos="fade-left" data-aos-delay="100">
          <div class="relative">
            <div class="absolute -inset-4 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-3xl blur-2xl opacity-60"></div>
            <img
              src={pageData.conversation.image}
              alt={pageData.conversation.imageAlt}
              class="relative rounded-2xl shadow-2xl border border-slate-200 w-full cursor-zoom-in"
              width="600"
              height="450"
              data-zoomable
            />
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Solution Section - Four Pillars -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-16">
        <div class="lg:col-10 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.solution.title}
          </h2>
          <p class="text-xl text-primary font-medium mb-6" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.solution.subtitle}
          </p>
          <p class="text-lg text-slate-600 max-w-3xl mx-auto" data-aos="fade-up-sm" data-aos-delay="100">
            {pageData.solution.description}
          </p>
        </div>
      </div>

      <!-- Alternating Pillar Rows -->
      {pageData.solution.pillars.map((pillar, index) => (
        <div class={`row items-center g-8 lg:g-12 ${index < pageData.solution.pillars.length - 1 ? 'mb-16 lg:mb-24' : ''}`}>
          {/* Text Column - alternates left/right */}
          <div class={`lg:col-6 ${index % 2 === 1 ? 'lg:order-2' : ''}`} data-aos={index % 2 === 0 ? "fade-right" : "fade-left"}>
            <div class="inline-block px-3 py-1 rounded-full bg-gradient-to-r from-primary/10 to-secondary/10 text-primary text-sm font-medium mb-4">
              {pillar.title}
            </div>
            <h3 class="text-2xl md:text-3xl font-bold text-slate-900 mb-4">
              {pillar.subtitle}
            </h3>
            <p class="text-lg text-slate-600">
              {pillar.description}
            </p>
          </div>
          {/* Image Column - alternates right/left */}
          <div class={`lg:col-6 ${index % 2 === 1 ? 'lg:order-1' : ''}`} data-aos={index % 2 === 0 ? "fade-left" : "fade-right"} data-aos-delay="100">
            <div class="relative">
              <div class="absolute -inset-4 bg-gradient-to-r from-primary/15 to-secondary/15 rounded-3xl blur-2xl opacity-50"></div>
              <img
                src={pillar.image}
                alt={pillar.imageAlt}
                class="relative rounded-2xl shadow-xl border border-slate-200 w-full cursor-zoom-in"
                width="600"
                height="450"
                data-zoomable
              />
            </div>
          </div>
        </div>
      ))}

      <!-- Note -->
      <div class="row justify-center mt-16">
        <div class="lg:col-10">
          <div class="p-6 rounded-2xl bg-slate-50 border border-slate-200 text-center" data-aos="fade-up-sm">
            <p class="text-slate-600 italic">{pageData.solution.note}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Comparison Section -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-10 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.comparison.title}
          </h2>
          <p class="text-xl font-semibold text-primary mb-6" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.comparison.subtitle}
          </p>
          <p class="text-lg text-slate-600 max-w-3xl mx-auto" data-aos="fade-up-sm" data-aos-delay="100">
            {pageData.comparison.description}
          </p>
        </div>
      </div>

      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="overflow-x-auto" data-aos="fade-up-sm" data-aos-delay="150">
            <table class="w-full">
              <thead>
                <tr class="border-b-2 border-slate-200">
                  <th class="text-left py-4 px-4 font-semibold text-slate-900">Capability</th>
                  <th class="text-left py-4 px-4 font-semibold text-primary">Kowalah Reserved</th>
                  <th class="text-left py-4 px-4 font-semibold text-slate-500">Generic AI Chat</th>
                </tr>
              </thead>
              <tbody>
                {pageData.comparison.items.map((item, index) => (
                  <tr class={`border-b border-slate-100 ${index % 2 === 0 ? 'bg-slate-50/50' : ''}`}>
                    <td class="py-4 px-4 font-medium text-slate-700">{item.capability}</td>
                    <td class="py-4 px-4 text-slate-900">{item.kowalah}</td>
                    <td class="py-4 px-4 text-slate-500">{item.generic}</td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Capabilities Section -->
  <section class="section bg-slate-900">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-8 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-4" data-aos="fade-up-sm">
            {pageData.capabilities.title}
          </h2>
        </div>
      </div>

      <div class="row g-6">
        {pageData.capabilities.items.map((capability, index) => (
          <div class="md:col-6" data-aos="fade-up-sm" data-aos-delay={index * 50}>
            <div class="h-full p-8 rounded-2xl bg-slate-800 border border-slate-700">
              <div class="flex items-start gap-4 mb-4">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center flex-shrink-0">
                  <Icon name={capability.icon} class="w-6 h-6 text-white" />
                </div>
                <div>
                  <h3 class="text-xl font-semibold text-white mb-2">{capability.title}</h3>
                  <p class="text-slate-400">{capability.description}</p>
                </div>
              </div>
              <ul class="space-y-2 ml-16">
                {capability.examples.map((example) => (
                  <li class="text-slate-300 text-sm flex items-start gap-2">
                    <span class="text-primary mt-1">•</span>
                    {example}
                  </li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Compounding Effect Section -->
  <section class="section bg-gradient-to-br from-primary/5 via-white to-secondary/5">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-10 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.compounding.title}
          </h2>
          <p class="text-lg text-slate-600" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.compounding.description}
          </p>
        </div>
      </div>

      <div class="row g-4 mb-12">
        {pageData.compounding.items.map((item, index) => (
          <div class="lg:col-4 md:col-6" data-aos="fade-up-sm" data-aos-delay={index * 50}>
            <div class="p-6 rounded-xl bg-white border border-slate-200 h-full">
              <h3 class="text-lg font-semibold text-slate-900 mb-2">{item.title}</h3>
              <p class="text-slate-600 text-sm">{item.description}</p>
            </div>
          </div>
        ))}
      </div>

      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="p-8 rounded-2xl bg-gradient-to-r from-primary to-secondary text-center" data-aos="fade-up-sm">
            <p class="text-xl text-white font-medium">
              {pageData.compounding.outcome}
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Mirroring Process Section -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-10 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.mirroring.title}
          </h2>
          <p class="text-lg text-slate-600" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.mirroring.subtitle}
          </p>
        </div>
      </div>

      <div class="row g-6 mb-8">
        {pageData.mirroring.months.map((month, index) => (
          <div class="lg:col-4" data-aos="fade-up-sm" data-aos-delay={index * 100}>
            <div class="h-full p-6 rounded-2xl bg-slate-50 border border-slate-100">
              <div class="inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-4">
                {month.title}
              </div>
              <h3 class="text-xl font-semibold text-slate-900 mb-2">{month.heading}</h3>
              <p class="text-slate-600 mb-4">{month.description}</p>
              <ul class="space-y-2">
                {month.items.map((item) => (
                  <li class="text-sm text-slate-600 flex items-start gap-2">
                    <span class="text-primary mt-0.5">•</span>
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>

      <div class="row justify-center">
        <div class="lg:col-10">
          <div class="p-6 rounded-2xl bg-slate-900 text-white" data-aos="fade-up-sm">
            <div class="flex flex-col md:flex-row md:items-start gap-6">
              <div class="flex-shrink-0">
                <div class="inline-block px-3 py-1 rounded-full bg-primary/20 text-primary text-sm font-medium">
                  {pageData.mirroring.ongoing.title}
                </div>
              </div>
              <div>
                <p class="text-white/80 mb-4">{pageData.mirroring.ongoing.description}</p>
                <ul class="grid md:grid-cols-2 gap-2">
                  {pageData.mirroring.ongoing.items.map((item) => (
                    <li class="text-sm text-white/70 flex items-start gap-2">
                      <Icon name="check" class="w-4 h-4 text-primary flex-shrink-0 mt-0.5" />
                      {item}
                    </li>
                  ))}
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Skills Library Section -->
  <section class="section bg-slate-50">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-8 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.skills.title}
          </h2>
          <p class="text-lg text-slate-600" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.skills.subtitle}
          </p>
        </div>
      </div>

      <div class="row g-6 justify-center">
        {pageData.skills.categories.map((category, index) => (
          <div class="md:col-6 lg:col-3" data-aos="fade-up-sm" data-aos-delay={index * 50}>
            <div class="h-full p-6 rounded-xl bg-white border border-slate-200">
              <h3 class="text-lg font-semibold text-primary mb-4">{category.title}</h3>
              <ul class="space-y-2">
                {category.items.map((item) => (
                  <li class="text-sm text-slate-600 flex items-start gap-2">
                    <span class="text-slate-400">•</span>
                    {item}
                  </li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Privacy Section -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-8 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900 mb-4" data-aos="fade-up-sm">
            {pageData.privacy.title}
          </h2>
          <p class="text-lg text-slate-600" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.privacy.subtitle}
          </p>
        </div>
      </div>

      <div class="row g-6">
        {pageData.privacy.items.map((item, index) => (
          <div class="md:col-6 lg:col-3" data-aos="fade-up-sm" data-aos-delay={index * 50}>
            <div class="text-center p-6">
              <div class="w-14 h-14 rounded-xl bg-slate-100 flex items-center justify-center mx-auto mb-4">
                <Icon name={item.icon} class="w-7 h-7 text-slate-700" />
              </div>
              <h3 class="text-lg font-semibold text-slate-900 mb-2">{item.title}</h3>
              <p class="text-sm text-slate-600">{item.description}</p>
            </div>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Application Form Section -->
  <section id="apply" class="section bg-slate-900">
    <div class="container">
      <div class="row justify-center">
        <div class="lg:col-8">
          <div class="text-center mb-10">
            <h2 class="text-3xl md:text-4xl font-bold text-white mb-4" data-aos="fade-up-sm">
              {pageData.application.title}
            </h2>
            <p class="text-lg text-white/70" data-aos="fade-up-sm" data-aos-delay="50">
              {pageData.application.subtitle}
            </p>
          </div>

          <div class="bg-slate-800 rounded-2xl p-8" data-aos="fade-up-sm" data-aos-delay="100">
            <!-- Success Message -->
            <div id="form-success" class="hidden mb-8 p-6 bg-green-900/50 border border-green-500/30 rounded-lg text-center">
              <h3 class="text-xl font-semibold text-green-400 mb-2">Thank you for your application</h3>
              <p class="text-green-300/80">We'll review your details and be in touch within 48 hours.</p>
            </div>

            <!-- Error Message -->
            <div id="form-error" class="hidden mb-8 p-6 bg-red-900/50 border border-red-500/30 rounded-lg text-center">
              <h3 class="text-xl font-semibold text-red-400 mb-2">Something went wrong</h3>
              <p class="text-red-300/80">Please try again or email us directly at <a href="mailto:reserved@kowalah.com" class="underline">reserved@kowalah.com</a></p>
            </div>

            <form id="reserved-form">
              <div class="grid md:grid-cols-2 gap-4 mb-4">
                <div>
                  <label for="firstname" class="block text-sm font-medium text-white/80 mb-2">First Name</label>
                  <input
                    type="text"
                    id="firstname"
                    name="firstname"
                    class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                    placeholder="John"
                    required
                  />
                </div>
                <div>
                  <label for="lastname" class="block text-sm font-medium text-white/80 mb-2">Last Name</label>
                  <input
                    type="text"
                    id="lastname"
                    name="lastname"
                    class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                    placeholder="Smith"
                    required
                  />
                </div>
              </div>

              <div class="mb-4">
                <label for="email" class="block text-sm font-medium text-white/80 mb-2">Email <span class="text-primary">*</span></label>
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                  placeholder="john@yourcompany.com"
                  required
                />
              </div>

              <div class="mb-4">
                <label for="phone" class="block text-sm font-medium text-white/80 mb-2">Phone Number</label>
                <input
                  type="tel"
                  id="phone"
                  name="phone"
                  class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                  placeholder="+44 7700 900123"
                />
              </div>

              <div class="mb-4">
                <label for="jobtitle" class="block text-sm font-medium text-white/80 mb-2">Job Title</label>
                <input
                  type="text"
                  id="jobtitle"
                  name="jobtitle"
                  class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                  placeholder="CEO"
                />
              </div>

              <div class="mb-6">
                <label for="message" class="block text-sm font-medium text-white/80 mb-2">Comments</label>
                <textarea
                  id="message"
                  name="message"
                  rows="4"
                  class="w-full px-4 py-3 rounded-lg bg-slate-700 border border-slate-600 text-white placeholder-slate-400 focus:outline-none focus:border-primary"
                  placeholder="Tell us about your strategic challenges and what drew you to Kowalah Reserved..."
                ></textarea>
              </div>

              <button
                type="submit"
                id="submit-button"
                class="w-full px-8 py-4 rounded-lg bg-gradient-to-r from-primary to-secondary text-white font-semibold hover:shadow-lg hover:shadow-primary/25 transition-all"
              >
                Submit Application
              </button>

              <p class="text-center text-sm text-white/50 mt-4">
                {pageData.application.privacy_note}
              </p>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="section bg-white">
    <div class="container">
      <div class="row justify-center mb-12">
        <div class="lg:col-8 text-center">
          <h2 class="text-3xl md:text-4xl font-bold text-slate-900" data-aos="fade-up-sm">
            {pageData.faq.title}
          </h2>
        </div>
      </div>

      <div class="row justify-center">
        <div class="lg:col-8">
          <div class="space-y-4" data-aos="fade-up-sm" data-aos-delay="50">
            {pageData.faq.items.map((item) => (
              <Accordion title={item.question} client:load>
                <p class="text-slate-600">{item.answer}</p>
              </Accordion>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="section pb-0">
    <div class="container">
      <div class="rounded-3xl bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-8 md:p-16 text-center relative overflow-hidden" data-aos="fade-up-sm">
        <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom_left,_var(--tw-gradient-stops))] from-primary/20 via-transparent to-transparent"></div>

        <div class="relative z-10">
          <h2 class="text-3xl md:text-4xl font-bold text-white mb-4">
            Ready to have a strategic partner who truly understands?
          </h2>
          <p class="text-xl text-white/70 mb-8 max-w-2xl mx-auto">
            Kowalah Reserved is for executives who want more than a chatbot. Apply to see if it's right for you.
          </p>
          <a
            href="#apply"
            class="inline-flex items-center gap-2 px-8 py-4 rounded-lg bg-gradient-to-r from-primary to-secondary text-white font-semibold hover:shadow-lg hover:shadow-primary/25 transition-all"
          >
            Apply for Kowalah Reserved
          </a>
        </div>
      </div>
    </div>
  </section>

</Base>

<script define:vars={{ portalId: pageData.application.hubspot.portal_id, formGuid: pageData.application.hubspot.form_guid }}>
  document.addEventListener("astro:page-load", () => {
    const form = document.getElementById("reserved-form");
    const submitButton = document.getElementById("submit-button");
    const successMessage = document.getElementById("form-success");
    const errorMessage = document.getElementById("form-error");

    const HUBSPOT_API_URL = `https://api.hsforms.com/submissions/v3/integration/submit/${portalId}/${formGuid}`;

    form?.addEventListener("submit", async (e) => {
      e.preventDefault();

      if (submitButton) {
        submitButton.disabled = true;
        submitButton.textContent = "Submitting...";
      }

      successMessage?.classList.add("hidden");
      errorMessage?.classList.add("hidden");

      const formData = new FormData(form);
      const fields = [];

      for (const [key, value] of formData.entries()) {
        if (value) {
          fields.push({
            objectTypeId: "0-1",
            name: key,
            value: value.toString()
          });
        }
      }

      const payload = {
        fields: fields,
        context: {
          pageUri: window.location.href,
          pageName: "Kowalah Reserved Application"
        }
      };

      try {
        const response = await fetch(HUBSPOT_API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        });

        if (response.ok) {
          successMessage?.classList.remove("hidden");
          form.reset();
          successMessage?.scrollIntoView({ behavior: "smooth", block: "center" });

          if (typeof window.plausible !== 'undefined') {
            window.plausible('Reserved Application Submitted');
          }
        } else {
          console.error("HubSpot submission failed:", await response.text());
          errorMessage?.classList.remove("hidden");
          errorMessage?.scrollIntoView({ behavior: "smooth", block: "center" });
        }
      } catch (error) {
        console.error("Form submission error:", error);
        errorMessage?.classList.remove("hidden");
        errorMessage?.scrollIntoView({ behavior: "smooth", block: "center" });
      } finally {
        if (submitButton) {
          submitButton.disabled = false;
          submitButton.textContent = "Submit Application";
        }
      }
    });
  });
</script>

<script>
  import mediumZoom from 'medium-zoom';

  // Initialize medium-zoom on all images with data-zoomable attribute
  document.addEventListener('DOMContentLoaded', () => {
    mediumZoom('[data-zoomable]', {
      margin: 40,
      background: 'rgba(15, 23, 42, 0.95)', // slate-900 with opacity
      scrollOffset: 0,
    });
  });

  // Re-initialize on Astro page transitions
  document.addEventListener('astro:page-load', () => {
    mediumZoom('[data-zoomable]', {
      margin: 40,
      background: 'rgba(15, 23, 42, 0.95)',
      scrollOffset: 0,
    });
  });
</script>

<style>
  /* Ensure medium-zoom overlay and image appear above all other elements */
  .medium-zoom-overlay {
    z-index: 9999 !important;
  }
  .medium-zoom-image--opened {
    z-index: 10000 !important;
  }
</style>

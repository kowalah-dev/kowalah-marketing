---
interface Props {
  node: {
    rows: Array<{
      cells: string[];
      _key: string;
    }>;
    _type: string;
    _key: string;
  };
  index: number;
  isInline: boolean;
}

const { node } = Astro.props;
const { rows } = node;

if (!rows || rows.length === 0) {
  console.warn("TableBlock: No rows provided", node);
  return null;
}

// First row is typically the header
const headerRow = rows[0];
const bodyRows = rows.slice(1);
---

<div class="my-8 overflow-x-auto">
  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
    {headerRow && (
      <thead class="bg-gray-50 dark:bg-gray-800">
        <tr>
          {headerRow.cells.map((cell: string) => (
            <th
              scope="col"
              class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"
            >
              {cell}
            </th>
          ))}
        </tr>
      </thead>
    )}
    <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
      {bodyRows.map((row) => (
        <tr>
          {row.cells.map((cell: string) => (
            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100">
              {cell}
            </td>
          ))}
        </tr>
      ))}
    </tbody>
  </table>
</div>

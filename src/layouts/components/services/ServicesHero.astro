---
import Button from "@/shortcodes/Button";
import ImageMod from "@/components/ImageMod.astro";

interface CTA {
  label: string;
  link: string;
  subtext?: string;
}

interface Props {
  title: string;
  subtitle: string;
  cta: CTA;
  image?: string;
  imageAlt?: string;
  backgroundImage?: string;
}

const { title, subtitle, cta, image, imageAlt, backgroundImage }: Props = Astro.props;
---

<section class={`section pb-0 ${backgroundImage ? 'pt-24 relative overflow-hidden z-0' : ''}`}>
  {backgroundImage && (
    <div class="absolute inset-0 -z-10">
      <ImageMod
        src={backgroundImage}
        alt={title}
        width={1920}
        height={800}
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-br from-primary/60 via-primary/55 to-secondary/60"></div>
    </div>
  )}

  <div class={`container ${backgroundImage ? 'relative z-10' : ''}`}>
    <div class="row justify-center text-center">
      <div class="col-12 lg:col-8">
        <h1 class={`h1 mb-6 ${backgroundImage ? 'text-white drop-shadow-lg' : ''}`} data-aos="fade-up-sm">{title}</h1>
        <p class={`text-lg mb-8 ${backgroundImage ? 'text-white/95 drop-shadow-md' : 'text-text-dark/80'}`} data-aos="fade-up-sm" data-aos-delay="100">
          {subtitle}
        </p>
        <div class="mb-10 flex flex-col items-center gap-3" data-aos="fade-up-sm" data-aos-delay="150">
          <Button
            label={cta.label}
            link={cta.link}
            style={backgroundImage ? "light" : "primary"}
            target="_self"
            className="w-full max-w-xs"
          />
          {cta.subtext && <p class={`text-sm ${backgroundImage ? 'text-white/90 drop-shadow-sm' : 'text-text-dark/70'}`}>{cta.subtext}</p>}
        </div>
      </div>
    </div>
    {image && (
      <div class="row justify-center pb-16">
        <div class="col-12 lg:col-10" data-aos="fade-up-sm" data-aos-delay="200">
          <ImageMod
            src={image}
            alt={imageAlt ?? title}
            width={1200}
            height={750}
            class="mx-auto w-full rounded-3xl border border-border/20 shadow-xl"
          />
        </div>
      </div>
    )}
  </div>
</section>

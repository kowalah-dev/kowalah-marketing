---
import { markdownify } from "@/lib/utils/textConverter";
import ImageMod from "../ImageMod.astro";
import {
  LightBulbIcon,
  RocketLaunchIcon,
  GlobeAltIcon,
  UserGroupIcon
} from '@heroicons/react/24/solid';

const { why } = Astro.props;

// Map icon names to Heroicon components
const iconMap: Record<string, any> = {
  'bulb': LightBulbIcon,
  'rocket': RocketLaunchIcon,
  'compass': GlobeAltIcon,
  'profile': UserGroupIcon,
};
---

<section class="section bg-tertiary">
  <div class="container">
    <div class="mb-14" data-aos="fade-up-sm" data-aos-delay="200">
      <p
        set:html={markdownify(why.subtitle)}
        class="mb-4 text-center text-sm"
      />
      <h2 set:html={markdownify(why.title)} class="h2 lg:h1 text-center" />
    </div>

    <!-- Full-width landscape image -->
    <div class="mb-12" data-aos="fade-up-sm">
      <ImageMod
        src={why.image}
        alt="why partner with kowalah"
        width={1536}
        height={768}
        class="mx-auto w-full rounded-3xl object-cover"
      />
    </div>

    <!-- Content section -->
    <div class="max-w-4xl mx-auto mb-14">
      <div class="flex justify-center items-center mb-6">
        <div
          class="bg-secondary rounded-full w-3 aspect-square mr-4"
          data-aos="fade-left-sm"
        >
        </div>
        <p set:html={markdownify(why.badge)} data-aos="fade-left-sm" />
      </div>

      <h2
        set:html={markdownify(why.reason)}
        class="mb-5 text-center max-md:[&>br]:hidden"
        data-aos="fade-up-sm"
      />
      <p
        set:html={markdownify(why.content)}
        class="mb-14 text-text-dark text-center max-md:[&>br]:hidden"
        data-aos="fade-up-sm"
      />
    </div>

    <!-- 2x2 Grid of points -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto">
      {
        why.points.map(
          (
            p: { icon: string; title: string; content: string },
            index: number
          ) => {
            const IconComponent = iconMap[p.icon];
            return (
              <div class="text-center md:text-left">
                <div
                  class="w-fit mb-6 bg-gradient-to-br from-primary to-secondary p-4 rounded-2xl mx-auto md:mx-0 shadow-lg"
                  data-aos="fade-up-sm"
                  data-aos-delay={index * 100}
                >
                  <IconComponent className="w-8 h-8 text-white" />
                </div>
                <p
                  set:html={p.title}
                  class="text-2xl font-medium text-text-dark mb-3"
                  data-aos="fade-up-sm"
                />
                <p
                  set:html={p.content}
                  class="text-text-dark"
                  data-aos="fade-up-sm"
                />
              </div>
            );
          }
        )
      }
    </div>
  </div>
</section>

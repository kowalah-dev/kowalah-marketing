---
import { markdownify } from "@/lib/utils/textConverter";
import DashedSeparator from "../DashedSeparator.astro";
import ImageMod from "../ImageMod.astro";
import Counter from "../functional/Counter";

const { about } = Astro.props;
---

<section class="section -mt-12 pt-0">
  <div class="container">
    <div
      class={`flex xl:flex-row flex-col xl:justify-between justify-center max-xl:gap-9 ${Astro.url.pathname.includes("company") && "mb-24"}`}
    >
      <div
        class="w-full lg:w-4/5 xl:w-[43%] mx-auto"
        data-aos="fade-up-sm"
        data-aos-delay="200"
      >
        <ImageMod
          src={about.image}
          alt="hero-image"
          width={490}
          height={559}
          class="object-cover mx-auto rounded-3xl w-full"
        />
      </div>
      <div class="w-full lg:w-4/5 xl:w-[49%] min-h-full mx-auto">
        <div class="flex flex-col justify-between h-full">
          <div>
            <h2
              set:html={markdownify(about.title)}
              class="mb-6 max-xl:text-center"
              data-aos="fade-up-sm"
            />
            <p
              set:html={markdownify(about.content)}
              class="max-xl:text-center"
              data-aos="fade-up-sm"
            />
          </div>

          <DashedSeparator />

          <div
            class="flex flex-row max-lg:flex-wrap justify-center xl:justify-between gap-4"
          >
            {
              about.stats.map((stat: any, index: number) => (
                <div
                  class="lg:w-1/3 max-xl:text-center"
                  data-aos="fade-up-sm"
                  data-aos-delay={index * 100}
                >
                  <p set:html={markdownify(stat.title)} />
                  <Counter
                    count={stat.value}
                    suffix={stat.suffix}
                    duration={2}
                    className="h1 text-text-dark font-semibold"
                    client:load
                  />
                </div>
              ))
            }
          </div>
        </div>
      </div>
    </div>

    {
      about?.trusted && (
        <div>
          <h4
            set:html={markdownify(about?.trusted?.title)}
            class="text-center text-2xl mb-6 max-lg:[&>br]:hidden"
            data-aos="fade-up-sm"
            data-aos-delay="200"
          />
          <div
            class="flex flex-wrap justify-center gap-4"
            data-aos="fade-up-sm"
            data-aos-delay="200"
          >
            {about?.trusted.partners.map((partner: string) => (
              <ImageMod
                src={partner}
                alt={partner}
                width={174}
                height={0}
                class="object-contain mx-auto w-[174px] opacity-40 hover:opacity-100 cursor-pointer transition duration-300"
              />
            ))}
          </div>
        </div>
      )
    }
  </div>
</section>
